<div class="image-grid-section">
  <div class="page-width">
    <div class="grid-header">
      <h2 class="grid-title">{{ section.settings.title }}</h2>
    </div>

    <div class="image-grid-container">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'image_item' %}
            <div class="grid-item">
              {% if block.settings.image != blank %}
                {{ block.settings.image | image_url: width: 600 | image_tag: class: 'grid-image' }}
              {% else %}
                <div class="placeholder-image">
                  {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                </div>
              {% endif %}
            </div>
        {% endcase %}
      {% endfor %}
    </div>
  </div>
</div>

<style>
  .image-grid-section {
    padding: 50px 0; /* Add some vertical padding for the section */
    background-color: white; /* Ensure a white background for the entire section */
  }

  .grid-header {
    padding: 0 50px; /* Padding to align with the left-top text positioning */
    margin-bottom: 40px; /* Space below the title before the grid starts */
    text-align: left; /* Align text to the left */
  }

  .grid-title {
    /* Specific styles for the title - already applied */
    width: 372px; /* Fixed width */
    height: 43px; /* Fixed height */
    font-family: 'Lustria', serif; /* Set font family (ensure loaded in theme.liquid) */
    font-weight: 400; /* Regular weight */
    font-size: 36px; /* Specific font size */
    line-height: 120%; /* Specific line height */
    letter-spacing: 0px; /* Specific letter spacing */
    color: black; /* Ensure text is visible */
    margin: 0; /* Remove default margins */
  }

  .image-grid-container {
    display: grid;
    /* This creates 3 columns, each designed to fit an image of approximately 433px. */
    /* The 'gap' will simulate the spacing derived from your 'left' values. */
    grid-template-columns: repeat(3, minmax(300px, 433px)); /* Min 300px, Max 433px per column */
    gap: 20px; /* Adjusted gap to provide spacing between images */
    padding: 0 50px; /* Horizontal padding for the grid to align with title */
    justify-content: center; /* Center the grid if it's narrower than the container */
    align-items: center; /* Vertically align grid items */
  }

  .grid-item {
    position: relative;
    overflow: hidden;
    background-color: #f0f0f0; /* Placeholder background */
    display: flex;
    justify-content: center;
    align-items: center;
    width: 433px; /* Specific width for each grid item as requested */
    height: 444px; /* Specific height for each grid item as requested */
  }

  .grid-image {
    width: 100%; /* Make image fill its grid-item */
    height: 100%; /* Make image fill its grid-item */
    display: block;
    object-fit: cover; /* Ensures images cover the area without distortion */
    opacity: 1; /* As per your request, default is 1 */
    /* angle: 0 deg is default for images */
  }

  .placeholder-image {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .placeholder-svg {
    max-width: 50%;
    max-height: 50%;
    opacity: 0.5;
  }

  /* Responsive Design */
  @media screen and (max-width: 1400px) { /* Adjust breakpoint for larger screens if 3 columns don't fit */
    .image-grid-container {
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Allow flexible columns */
      padding: 0 30px;
    }
    .grid-item {
      width: auto; /* Allow width to be flexible */
      height: auto; /* Allow height to be flexible, maintaining aspect ratio with object-fit */
      aspect-ratio: 433 / 444; /* Maintain aspect ratio */
    }
  }

  @media screen and (max-width: 768px) {
    .grid-title {
      width: auto; /* Remove fixed width on mobile */
      height: auto;
      font-size: 28px; /* Adjust font size for mobile */
      text-align: center; /* Center title on mobile */
    }
    .grid-header {
      padding: 0 20px; /* Adjust padding for mobile */
    }
    .image-grid-container {
      grid-template-columns: 1fr; /* Single column on small screens */
      padding: 0 20px; /* Adjust padding for mobile */
      gap: 15px; /* Smaller gap on mobile */
    }
  }
</style>

{% schema %}
{
  "name": "Image Grid",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "TISSO VISON IN THE WILD"
    }
  ],
  "blocks": [
    {
      "type": "image_item",
      "name": "Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Image Grid Section",
      "blocks": [
        { "type": "image_item" },
        { "type": "image_item" },
        { "type": "image_item" },
        { "type": "image_item" },
        { "type": "image_item" },
        { "type": "image_item" }
      ]
    }
  ]
}
{% endschema %}
